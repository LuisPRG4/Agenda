<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Agenda Bancaria</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>

  <!-- T√≠tulo y bot√≥n de tema -->
  <div style="text-align:right; margin-bottom:.5rem;">
    <button id="btnTema" title="Cambiar tema">üåì</button>
  </div>
  <h1 style="text-align:center; margin-bottom:1rem;">Agenda Bancaria</h1>

  <!-- Contenedor lateral (pesta√±as + contenido) -->
  <div class="sidebar">

    <!-- Pesta√±as laterales -->
    <nav class="side-tabs">
      <button class="side-tab active" onclick="mostrarSideTab('dashboard')">üìä Dashboard</button>
      <button class="side-tab" onclick="mostrarSideTab('movimientos')">üí≥ Movimientos</button>
      <button class="side-tab" onclick="mostrarSideTab('analisis')">üìà An√°lisis</button>
      <button class="side-tab" onclick="mostrarSideTab('config')">‚öôÔ∏è Config</button>
    </nav>

    <!-- Contenido de cada pesta√±a lateral -->
    <div class="side-content active" id="side-dashboard">
      <!-- Dashboard completo -->
      <section id="buscador">
        <input type="text" id="txtBuscar" placeholder="üîç Buscar..." />
      </section>

      <section id="resumen">
        <h2>Resumen</h2>
        <p>Saldo actual: <strong id="saldo">Bs. 0,00</strong></p>

        <div style="margin-top: 1rem; display: flex; gap: 1rem; flex-wrap: wrap; align-items: center;">
  <label style="font-size: 0.875rem; color: var(--text-light);">
    Convertir a:
    <select id="monedaDestino">
      <option value="USD">D√≥lar (USD)</option>
      <option value="EUR">Euro (EUR)</option>
      <option value="COP">Peso Colombiano (COP)</option>
      <option value="ARS">Peso Argentino (ARS)</option>
      <option value="MXN">Peso Mexicano (MXN)</option>
    </select>
  </label>

  <label style="font-size: 0.875rem; color: var(--text-light);">
    Tasa 1 Bs. =
    <input type="number" id="tasaCambio" step="0.000001" value="0.00012" style="width: 80px;" />
  </label>

  <div style="font-weight: 500; font-size: 1.1rem;">
    Equivalente: <span id="equivalente">--</span>
  </div>
</div>

      </section>

      <section id="alertaSaldo" style="display:none;">
        <p style="color:var(--danger); font-weight:500;">
          ‚ö†Ô∏è Tu saldo est√° por debajo de Bs. <span id="umbralAlerta">500</span>
        </p>
      </section>

      <section id="disponibilidad">
        <h2>Disponibilidad total</h2>
        <p><strong>Bs. <span id="totalGeneral">0,00</span></strong> en todos los bancos</p>
      </section>

      <section id="ingGastPorBanco">
  <h2>Ingresos vs Gastos por banco</h2>
  <table id="tablaBancos" style="width:100%; border-collapse:collapse;">
    <thead>
      <tr style="border-bottom:1px solid var(--text-light);">
        <th style="text-align:left;">Banco</th>
        <th style="text-align:right;">Ingresos</th>
        <th style="text-align:right;">Gastos</th>
        <th style="text-align:right;">Saldo</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</section>
    </div>

    <!-- MOVIMIENTOS -->
    <div class="side-content" id="side-movimientos">
      <section>
        <h2>Agregar Movimiento</h2>

        <section>
          <h3>Saldo Inicial</h3>
          <input type="number" id="saldoInicial" placeholder="Ingrese saldo inicial (opcional)" step="0.01" />

          <label>
          <input type="checkbox" id="ocultarSaldoInicial" />
          Ocultar saldo inicial en la lista (solo afecta visualmente)
        </label>
        
          <button onclick="agregarSaldoInicial()">Guardar Saldo</button>
        </section>
        

        <input type="text" id="concepto" placeholder="Concepto" />
        <input type="number" id="cantidad" placeholder="Cantidad" />
        <select id="tipo">
          <option value="ingreso">Ingreso</option>
          <option value="gasto">Gasto</option>
        </select>

        <label>Categor√≠a:
  <div style="display:flex; gap:.5rem;">
    <select id="categoria">
      <option value="">(autom√°tica)</option>
     <!-- <option value="Otro">+ Nueva‚Ä¶</option> -->
    </select>
    <button onclick="agregarCategoria()" style="padding:.5rem; border:none; background:#0b57d0; color:white; border-radius:50%; width:2rem; height:2rem; font-size:1rem;">+</button>
  </div>
</label>
        <input type="text" id="nuevaCategoria" placeholder="Nombre nueva categor√≠a" style="display:none;" />

        <label>Banco:
  <div style="display:flex; gap:.5rem;">
    <select id="banco">
      <option value="">(Sin banco)</option>
      <!-- <option value="Otro">+ Nuevo‚Ä¶</option> -->
    </select>
    <button onclick="agregarBanco()" style="padding:.5rem; border:none; background:#0b57d0; color:white; border-radius:50%; width:2rem; height:2rem; font-size:1rem;">+</button>
  </div>
</label>
        <input type="text" id="nuevoBanco" placeholder="Nombre del banco" style="display:none;" />

        <label>Fecha:
          <input type="date" id="fechaMov" />
        </label>

        <button onclick="agregarMovimiento()">Agregar</button>
      </section>

      <section>
        <h2>Movimientos</h2>
        <ul id="lista"></ul>
      </section>

      <div class="button-center">
        <button onclick="exportarExcel()">üìä Exportar Excel</button>
      </div>
    </div>

    <!-- AN√ÅLISIS -->
    <div class="side-content" id="side-analisis">
      <section id="grafico">
        <h2>Gastos por categor√≠a</h2>
        <canvas id="torta" style="max-width:100%; height:auto;"></canvas>
      </section>

      <section id="barras">
        <h2>Resumen mensual</h2>
        <canvas id="barChart" style="max-width:100%; height:auto;"></canvas>
      </section>

      <section id="resumenBancos">
        <h2>Resumen por banco</h2>
        <select id="filtroBanco">
          <option value="">Todos los bancos</option>
        </select>
        <ul id="listaBancos"></ul>
      </section>
    </div>

    <!-- CONFIG -->
    <div class="side-content" id="side-config">
      <section id="panelReglas">
        <h2>Reglas de automatizaci√≥n</h2>
        <ul id="listaReglas"></ul>
        <details>

          <details>
            <summary>üóëÔ∏è Eliminar categor√≠a</summary>
            <select id="selectEliminarCategoria">
              <option value="">Selecciona una categor√≠a</option>
            </select>
            <button onclick="eliminarCategoria()">Eliminar</button>
          </details>

          <details>
            <summary>üóëÔ∏è Eliminar banco</summary>
            <select id="selectEliminarBanco">
              <option value="">Selecciona un banco</option>
            </select>
            <button onclick="eliminarBanco()">Eliminar</button>
          </details>

          <summary>‚ûï Nueva regla</summary>
          <input type="text" id="txtPalabra" placeholder="Palabra clave (ej. netflix)" />
          <input type="text" id="txtCat" placeholder="Categor√≠a a asignar" />

          <!-- Selector de banco dentro de reglas -->
          <label>Banco objetivo:
            <select id="txtBancoRegla">
              <option value="">Cualquier banco</option>
              <option value="Otro">+ Nuevo‚Ä¶</option>
            </select>
          </label>
          <input type="text" id="nuevoBancoRegla" placeholder="Nombre del banco" style="display:none;" />

          <button onclick="agregarRegla()">Guardar regla</button>
        </details>
      </section>
    </div>

  </div>

  <!-- Scripts -->
  <script src="chart.umd.min.js"></script>
  <script src="xlsx.full.min.js"></script>
  <script src="data.js"></script>
  <script src="rules.js"></script>
  <script src="app.js"></script>

</body>
</html>
